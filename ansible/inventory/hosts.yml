---
# VMStation Monitoring Stack - Inventory
# Defines the cluster topology for monitoring deployment

all:
  vars:
    # Kubernetes configuration
    kubernetes_version: "1.29"
    pod_network_cidr: "10.244.0.0/16"
    service_network_cidr: "10.96.0.0/12"
    
    # Container runtime
    container_runtime: containerd
    cri_socket: "unix:///var/run/containerd/containerd.sock"
    
    # Cluster endpoint
    control_plane_endpoint: "192.168.4.63:6443"
    
    # CNI configuration
    cni_plugin: flannel
    
    # SSH configuration
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    
    # Monitoring configuration
    monitoring_namespace: monitoring
    prometheus_nodeport: 30090
    grafana_nodeport: 30300
    loki_nodeport: 31100
    
  children:
    monitoring_nodes:
      hosts:
        masternode:
          ansible_host: 192.168.4.63
          ansible_user: root
          ansible_connection: local
          wol_mac: '00:e0:4c:68:cb:bf'
          node_role: control-plane
          node_labels:
            - "node-role.kubernetes.io/control-plane="
            - "vmstation.io/role=monitoring"
      vars:
        schedule_monitoring_pods: true
        install_monitoring_stack: true
        
    storage_nodes:
      hosts:
        storagenodet3500:
          ansible_host: 192.168.4.61
          ansible_user: root
          ansible_ssh_private_key_file: /root/.ssh/id_k3s
          wol_mac: 'b8:ac:6f:7e:6c:9d'
          node_role: worker
          node_labels:
            - "vmstation.io/role=storage"
      vars:
        schedule_storage_workloads: true
        
    compute_nodes:
      hosts:
        homelab:
          ansible_host: 192.168.4.62
          ansible_user: jashandeepjustinbains
          ansible_ssh_private_key_file: /root/.ssh/id_k3s
          wol_mac: 'd0:94:66:30:d6:63'
          node_role: worker
          node_labels:
            - "vmstation.io/role=compute"
          os_family: RedHat
          os_version: "10"
          ansible_become: true
          ansible_become_method: sudo
      vars:
        schedule_compute_workloads: true
        rke2_enabled: true
